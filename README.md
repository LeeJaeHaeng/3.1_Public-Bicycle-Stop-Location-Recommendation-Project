# 🚴‍♂️ 대구 수성구 따릉이 정류소 추천 시스템

머신러닝을 활용한 데이터 기반 공공자전거 정류소 최적 위치 추천 프로젝트

## 📋 프로젝트 개요

본 프로젝트는 서울시 따릉이 이용 데이터를 분석하여 대구 수성구에 최적의 공공자전거 정류소 위치를 추천하는 시스템입니다. 머신러닝 알고리즘을 통해 서울의 자전거 이용 패턴을 학습하고, 대구 수성구의 인구 및 지역 특성을 반영하여 데이터 기반의 정류소 추천을 제공합니다.

## 🎯 주요 기능

- **데이터 분석**: 서울시 따릉이 이용 데이터 및 대여소 정보 분석
- **머신러닝 모델링**: 다중 회귀 모델을 통한 정류소 인기도 예측
- **지역 맞춤 추천**: 대구 수성구 인구 및 지역 특성 반영
- **시각화**: Folium을 활용한 인터랙티브 지도 생성
- **성능 평가**: 다양한 ML 알고리즘 비교 및 최적 모델 선택

## 🛠️ 기술 스택

### 데이터 처리 & 분석
- **pandas**: 데이터 조작 및 분석
- **numpy**: 수치 연산
- **re**: 정규표현식을 통한 텍스트 처리

### 머신러닝
- **scikit-learn**: 
  - `RandomForestRegressor`: 랜덤 포레스트 회귀
  - `GradientBoostingRegressor`: 그래디언트 부스팅 회귀  
  - `LinearRegression`: 선형 회귀
  - `StandardScaler`: 특성 정규화
  - `train_test_split`: 데이터 분할
  - `GridSearchCV`, `cross_val_score`: 모델 검증

### 시각화 & 지도
- **matplotlib**: 기본 시각화
- **seaborn**: 고급 통계 시각화
- **folium**: 인터랙티브 웹 지도 생성
- **MarkerCluster**: 지도 마커 클러스터링

### API & 웹
- **requests**: HTTP 요청 (Kakao Map API)

## 📊 데이터셋

### 입력 데이터
1. **서울시 따릉이 이용 데이터** (`tpss_bcycl_od_statnhm_20241102.csv`)
   - 대여소별 이용 건수, 이용 시간, 이용 거리
   - 시작/종료 대여소 정보

2. **서울시 따릉이 대여소 정보** (`서울시_따릉이_대여소별 대여반납 승객수 정보 _20241231.csv`)
   - 대여소별 상세 이용 통계

3. **대구 수성구 인구 데이터** (`대구광역시_수성구_월별인구현황.csv`)
   - 수성구 인구 현황 및 분포

4. **신규가입자 데이터** (`서울특별시 공공자전거 신규가입자 정보(월별)_24.7-12.csv`)
   - 월별 신규 가입자 추이

## 🔧 설치 방법

### 1. 저장소 클론
```bash
git clone https://github.com/LeeJaeHaeng/8_team-Group-Project.git
cd 8_team-Group-Project
```

### 2. 필요한 패키지 설치
```bash
pip install pandas numpy scikit-learn matplotlib seaborn folium requests
```

### 3. 데이터 파일 준비
프로젝트 루트 디렉토리에 다음 파일들을 배치:
- `tpss_bcycl_od_statnhm_20241102.csv`
- `서울시_따릉이_대여소별 대여반납 승객수 정보 _20241231.csv`
- `대구광역시_수성구_월별인구현황.csv`
- `서울특별시 공공자전거 신규가입자 정보(월별)_24.7-12.csv`

## 🚀 사용 방법

### 기본 실행
```bash
python test.py
```

### 실행 과정
1. **데이터 로딩**: CSV 파일들을 읽어와 데이터프레임으로 변환
2. **데이터 전처리**: 구 정보 추출 및 통계 계산
3. **특성 엔지니어링**: 서울 구별 이용 패턴 특성 생성
4. **모델 학습**: 3개 ML 모델 훈련 및 성능 비교
5. **예측**: 대구 수성구 맞춤 정류소 위치 및 이용량 예측
6. **시각화**: 결과 지도 생성 및 분석 리포트 출력

## 📈 핵심 알고리즘

### 1. 구 정보 추출 알고리즘
```python
def extract_gu_from_station_name(station_name):
    """대여소명에서 구 정보를 추출하는 정규표현식 기반 알고리즘"""
```
- 정규표현식과 매핑 테이블을 활용한 지역 분류
- 25개 서울시 자치구 자동 분류

### 2. 특성 엔지니어링
```python
def create_seoul_gu_features(gu_stats):
    """구별 특성 벡터 생성"""
```
- **이용량 점수**: `min(total_usage / 1000, 10)`
- **효율성 점수**: `avg_distance / avg_duration`
- **인기도 랭킹**: 이용량 기준 순위

### 3. 머신러닝 모델 앙상블
- **RandomForest**: 과적합 방지 및 특성 중요도 분석
- **GradientBoosting**: 순차적 오류 보정으로 높은 정확도
- **LinearRegression**: 기준 모델 및 해석 용이성

### 4. 지역 맞춤 예측
```python
population_ratio = daegu_population / seoul_total_population
predicted_usage = seoul_avg_usage * population_ratio * priority_multiplier
```

## 📊 모델 성능

| 모델 | R² Score | MAE | MSE | 특징 |
|------|----------|-----|-----|------|
| **GradientBoosting** | **0.913** | 1.375 | 2.077 | **최고 성능** |
| RandomForest | 0.856 | 1.640 | 3.433 | 안정적 |
| LinearRegression | 0.840 | 1.724 | 3.811 | 해석 용이 |

- **최종 선택**: GradientBoosting (91.3% 예측 정확도)

## 🗺️ 추천 결과

### 대구 수성구 추천 정류소 (5개소)

| 순위 | 정류소명 | 위치 | 예상 일일 이용량 | 신뢰도 | 우선순위 |
|------|----------|------|------------------|--------|----------|
| 1 | 수성못역 | (35.825, 128.625) | 106건 | 88.8% | 매우높음 |
| 2 | 대구대학교 | (35.832, 128.632) | 79건 | 88.8% | 높음 |
| 3 | 수성구청 | (35.826, 128.630) | 79건 | 88.8% | 높음 |
| 4 | 범어동 상업지구 | (35.828, 128.628) | 53건 | 88.8% | 중간 |
| 5 | 시지지구 | (35.830, 128.635) | 53건 | 88.8% | 중간 |

### 예상 이용량
- **일일 총 이용량**: 370건
- **월 이용량**: 11,100건
- **연 이용량**: 약 135,000건

## 📁 프로젝트 구조

```
8_team-Group-Project/
├── test.py                           # 메인 실행 파일
├── README.md                         # 프로젝트 문서
├── daegu_suseong_map.html           # 생성된 지도 파일
├── backup_map.html                  # 백업 지도 파일
├── data/                            # 데이터 파일들
│   ├── tpss_bcycl_od_statnhm_20241102.csv
│   ├── 서울시_따릉이_대여소별 대여반납 승객수 정보 _20241231.csv
│   ├── 대구광역시_수성구_월별인구현황.csv
│   └── 서울특별시 공공자전거 신규가입자 정보(월별)_24.7-12.csv
└── results/                         # 결과 파일들
    ├── analysis_results.txt
    └── visualizations/
```

## 🔍 주요 함수 설명

### 데이터 처리
- `load_real_data()`: 모든 CSV 데이터 로딩
- `process_seoul_data()`: 서울 데이터 전처리 및 구별 통계 생성
- `parse_daegu_population()`: 대구 인구 데이터 파싱

### 머신러닝
- `train_and_validate_models()`: 3개 모델 훈련 및 성능 비교
- `recommend_stations_for_daegu_suseong()`: 대구 맞춤 정류소 추천

### 시각화
- `generate_kakao_map()`: Folium 기반 인터랙티브 지도 생성
- `visualize_results()`: 종합 분석 결과 출력

## 🎯 핵심 인사이트

### 서울 데이터 분석 결과
1. **상위 이용 지역**: 영등포구(15,384건) > 송파구(14,934건) > 강서구(12,496건)
2. **평균 이용 패턴**: 29.8분, 3,359m 이동
3. **구별 특성**: 16개 구 분석을 통한 이용 패턴 도출

### 대구 수성구 특성 반영
1. **인구 비율**: 4.31% (서울 대비)
2. **지역 특성**: 교육기관, 상업지구, 주거지역 우선 고려
3. **접근성**: 대중교통 연계점 중심 배치

## ⚠️ 제한사항 및 개선점

### 현재 제한사항
- 서울 데이터 기반 예측으로 지역별 특성 차이 미반영
- 계절별, 요일별 이용 패턴 변화 미고려
- 실제 지형, 교통 인프라 정보 부족

### 향후 개선 방안
1. **실시간 데이터**: 날씨, 교통상황 등 동적 요소 반영
2. **딥러닝**: LSTM, GNN 등 고급 모델 적용
3. **다중 도시**: 여러 도시 데이터를 활용한 일반화 모델
4. **사용자 피드백**: 실제 운영 후 피드백 반영 시스템

## 🤝 팀 정보

**Team 8 - 기계학습 프로젝트**
- 컴퓨터공학과 빅데이터 전공

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

## 📞 문의사항

프로젝트 관련 문의사항이 있으시면 Issues를 통해 연락해 주세요.

---

**🚴‍♂️ 데이터 기반 스마트 도시, 함께 만들어가요!**
